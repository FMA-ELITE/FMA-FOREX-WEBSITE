<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forex Mastery Academy | Signals & Mentorship | Uganda</title>
    <style>
        :root {
            --gold: #FFD700;
            --dark: #1A1A2E;
            --blue: #16213E;
            --green: #2ECC71;
            --purple: #9B59B6;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            color: white;
            background-color: var(--dark);
            line-height: 1.6;
        }
        
        /* [Keep all your existing CSS styles...] */
        
        /* New Payment Form Styles */
        .payment-form {
            display: none;
            margin-top: 15px;
            animation: fadeIn 0.3s;
        }
        
        .payment-option-btn {
            margin: 5px 0;
            width: 100%;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <!-- [Keep all your existing header and navigation...] -->
    
    <!-- SIGNALS TAB (Updated) -->
    <div id="signals" class="tab-content active">
        <h2 style="text-align: center; margin-bottom: 30px;">VIP FOREX SIGNALS PLANS</h2>
        <p style="text-align: center; max-width: 800px; margin: 0 auto 40px;">Receive daily high-probability trading signals with precise entry/exit points, risk management guidance, and WhatsApp support.</p>
        
        <div class="pricing-container">
            <!-- 1 MONTH PLAN (Updated) -->
            <div class="pricing-card">
                <h3 class="plan-name">1 Month</h3>
                <div class="price">50,000 UGX</div>
                <ul class="features">
                    <li>3-5 signals per day (Mon-Fri)</li>
                    <li>Basic WhatsApp support</li>
                    <li>Entry/Exit/Target levels</li>
                    <li>Daily market updates</li>
                </ul>
                <button onclick="showPaymentForm('1month')" class="btn">SUBSCRIBE NOW</button>
                
                <div id="1month-form" class="payment-form">
                    <input type="tel" id="1month-phone" placeholder="256XXXXXXXXX" class="form-input" required>
                    <button onclick="processPayment('1month', 'full')" class="btn payment-option-btn" style="background:var(--green);">
                        Pay Full (50,000 UGX)
                    </button>
                    <button onclick="processPayment('1month', 'installment')" class="btn payment-option-btn" style="background:var(--purple);">
                        Pay Installment (25,000 UGX x 2)
                    </button>
                    <p id="1month-status" class="status-message"></p>
                </div>
            </div>
            
            <!-- [Repeat similar structure for all other plans...] -->
        </div>
    </div>

    <!-- [Keep all other tab content sections...] -->

    <footer>
        <!-- [Keep your existing footer...] -->
    </footer>

    <script>
        // Initialize Africa's Talking
        const atClient = new AfricasTalking({
            username: 'FMA_ELITE',
            apiKey: 'your_api_key_here'
        });

        // Show payment form
        function showPaymentForm(planId) {
            document.getElementById(`${planId}-form`).style.display = 'block';
        }

        // Process payment
        async function processPayment(planId, paymentType) {
            const phone = document.getElementById(`${planId}-phone`).value;
            const statusElement = document.getElementById(`${planId}-status`);
            
            if (!phone || !phone.startsWith('256')) {
                statusElement.innerHTML = '<span style="color:red;">Enter valid UG phone (256XXXXXXXXX)</span>';
                return;
            }

            // Define all payment plans and amounts
            const plans = {
                '1month': { full: 50000, installment: 25000 },
                '3months': { full: 110000, installment: 55000 },
                'lifetime': { full: 1000000 },
                'beginner': { full: 750000, installment: 200000 },
                // Add all other plans...
            };

            const amount = plans[planId][paymentType];
            statusElement.innerHTML = '<span style="color:orange;">Processing payment...</span>';

            try {
                const response = await fetch('https://your-render-backend.onrender.com/pay', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        plan: planId,
                        type: paymentType,
                        amount: amount,
                        phone: phone
                    })
                });
                
                const result = await response.json();
                
                if (result.status === 'success') {
                    statusElement.innerHTML = `
                        <span style="color:green;">âœ“ Payment initiated!</span><br>
                        <small>Complete the USSD prompt on your phone.<br>
                        Transaction ID: ${result.transaction_id}</small>
                    `;
                } else {
                    throw new Error(result.message || 'Payment failed');
                }
            } catch (error) {
                statusElement.innerHTML = `<span style="color:red;">Error: ${error.message}</span>`;
            }
        }

        // [Keep your existing tab switching function...]
        function openTab(tabName) {
            // ... existing tab switching code ...
        }
    </script>
    
    <!-- Load Africa's Talking SDK -->
    <script src="https://unpkg.com/africastalking-js@latest/dist/africastalking.min.js"></script>
</body>
</html>